<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"> <style>
	.KEYW {color: #933;}
	.COMM {color: #bbb; font-style: italic;}
	.NUMB {color: #393;}
	.STRN {color: #393;}
	.REGX {color: #339;}
	.line {border-right: 1px dotted #666; color: #666; font-style: normal;}
	</style></head><body><pre><span class='line'>  1</span> <span class="COMM">// ==========================================================================</span><span class="WHIT">
<span class='line'>  2</span> </span><span class="COMM">// Project:   SproutCore Costello - Property Observing Library</span><span class="WHIT">
<span class='line'>  3</span> </span><span class="COMM">// Copyright: ©2006-2009 Sprout Systems, Inc. and contributors.</span><span class="WHIT">
<span class='line'>  4</span> </span><span class="COMM">//            Portions ©2008-2009 Apple Inc. All rights reserved.</span><span class="WHIT">
<span class='line'>  5</span> </span><span class="COMM">// License:   Licensed under MIT license (see license.js)</span><span class="WHIT">
<span class='line'>  6</span> </span><span class="COMM">// ==========================================================================</span><span class="WHIT">
<span class='line'>  7</span> 
<span class='line'>  8</span> </span><span class="NAME">sc_require</span><span class="PUNC">(</span><span class="STRN">'core'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>  9</span> </span><span class="NAME">sc_require</span><span class="PUNC">(</span><span class="STRN">'mixins/observable'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 10</span> </span><span class="NAME">sc_require</span><span class="PUNC">(</span><span class="STRN">'mixins/array'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 11</span> </span><span class="NAME">sc_require</span><span class="PUNC">(</span><span class="STRN">'system/set'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 12</span> 
<span class='line'> 13</span> </span><span class="COMM">/*globals $$sel */</span><span class="WHIT">
<span class='line'> 14</span> 
<span class='line'> 15</span> </span><span class="NAME">SC.BENCHMARK_OBJECTS</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">NO</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 16</span> 
<span class='line'> 17</span> </span><span class="COMM">// ..........................................................</span><span class="WHIT">
<span class='line'> 18</span> </span><span class="COMM">// PRIVATE HELPER METHODS</span><span class="WHIT">
<span class='line'> 19</span> </span><span class="COMM">// </span><span class="WHIT">
<span class='line'> 20</span> </span><span class="COMM">// Private helper methods.  These are not kept as part of the class</span><span class="WHIT">
<span class='line'> 21</span> </span><span class="COMM">// definition because SC.Object is copied frequently and we want to keep the</span><span class="WHIT">
<span class='line'> 22</span> </span><span class="COMM">// number of class methods to a minimum.</span><span class="WHIT">
<span class='line'> 23</span> 
<span class='line'> 24</span> </span><span class="COMM">/** @private
<span class='line'> 25</span>   Augments a base object by copying the properties from the extended hash.
<span class='line'> 26</span>   In addition to simply copying properties, this method also performs a 
<span class='line'> 27</span>   number of optimizations that can make init'ing a new object much faster
<span class='line'> 28</span>   including:
<span class='line'> 29</span>   
<span class='line'> 30</span>   - concatenating concatenatedProperties
<span class='line'> 31</span>   - prepping a list of bindings, observers, and dependent keys
<span class='line'> 32</span>   - caching local observers so they don't need to be manually constructed.
<span class='line'> 33</span> 
<span class='line'> 34</span>   @param {Hash} base hash
<span class='line'> 35</span>   @param {Hash} extension
<span class='line'> 36</span>   @returns {Hash} base hash
<span class='line'> 37</span> */</span><span class="WHIT">
<span class='line'> 38</span> </span><span class="NAME">SC._object_extend</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">_object_extend</span><span class="PUNC">(</span><span class="NAME">base</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">ext</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'> 39</span>   </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">ext</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="STRN">"SC.Object.extend expects a non-null value.  Did you forget to 'sc_require' something?  Or were you passing a Protocol to extend() as if it were a mixin?"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 40</span> 
<span class='line'> 41</span>   </span><span class="COMM">// set _kvo_cloned for later use</span><span class="WHIT">
<span class='line'> 42</span>   </span><span class="NAME">base._kvo_cloned</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 43</span> 
<span class='line'> 44</span>   </span><span class="COMM">// get some common vars</span><span class="WHIT">
<span class='line'> 45</span>   </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">key</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">idx</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">cur</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">cprops</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">base.concatenatedProperties</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">K</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">SC.K</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 46</span>   </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">p1</span><span class="PUNC">,</span><span class="NAME">p2</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 47</span> 
<span class='line'> 48</span>   </span><span class="COMM">// first, save any concat props.  use old or new array or concat</span><span class="WHIT">
<span class='line'> 49</span>   </span><span class="NAME">idx</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">cprops</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">cprops.length</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 50</span>   </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">concats</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">idx</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 51</span>   </span><span class="KEYW">while</span><span class="PUNC">(</span><span class="PUNC">--</span><span class="NAME">idx</span><span class="PUNC">>=</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'> 52</span>     </span><span class="NAME">key</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">cprops</span><span class="PUNC">[</span><span class="NAME">idx</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">p1</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">base</span><span class="PUNC">[</span><span class="NAME">key</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">p2</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">ext</span><span class="PUNC">[</span><span class="NAME">key</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 53</span> 
<span class='line'> 54</span>     </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">p1</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'> 55</span>       </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">p1</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">Array</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">p1</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">SC.$A</span><span class="PUNC">(</span><span class="NAME">p1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 56</span>       </span><span class="NAME">concats</span><span class="PUNC">[</span><span class="NAME">key</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">p2</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">p1.concat</span><span class="PUNC">(</span><span class="NAME">p2</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">p2</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 57</span>     </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'> 58</span>       </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">p2</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">Array</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">p2</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">SC.$A</span><span class="PUNC">(</span><span class="NAME">p2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 59</span>       </span><span class="NAME">concats</span><span class="PUNC">[</span><span class="NAME">key</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">p2</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 60</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'> 61</span>   </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'> 62</span> 
<span class='line'> 63</span>   </span><span class="COMM">// setup arrays for bindings, observers, and properties.  Normally, just</span><span class="WHIT">
<span class='line'> 64</span>   </span><span class="COMM">// save the arrays from the base.  If these need to be changed during </span><span class="WHIT">
<span class='line'> 65</span>   </span><span class="COMM">// processing, then they will be cloned first.</span><span class="WHIT">
<span class='line'> 66</span>   </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bindings</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">base._bindings</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">clonedBindings</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">NO</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 67</span>   </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">observers</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">base._observers</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">clonedObservers</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">NO</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 68</span>   </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">properties</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">base._properties</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">clonedProperties</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">NO</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 69</span>   </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">paths</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">pathLoc</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">local</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 70</span> 
<span class='line'> 71</span>   </span><span class="COMM">// outlets are treated a little differently because you can manually </span><span class="WHIT">
<span class='line'> 72</span>   </span><span class="COMM">// name outlets in the passed in hash. If this is the case, then clone</span><span class="WHIT">
<span class='line'> 73</span>   </span><span class="COMM">// the array first.</span><span class="WHIT">
<span class='line'> 74</span>   </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">outlets</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">base.outlets</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">clonedOutlets</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">NO</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 75</span>   </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">ext.outlets</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> 
<span class='line'> 76</span>     </span><span class="NAME">outlets</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">outlets</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">SC.EMPTY_ARRAY</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">concat</span><span class="PUNC">(</span><span class="NAME">ext.outlets</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 77</span>     </span><span class="NAME">clonedOutlets</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">YES</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 78</span>   </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'> 79</span> 
<span class='line'> 80</span>   </span><span class="COMM">// now copy properties, add superclass to func.</span><span class="WHIT">
<span class='line'> 81</span>   </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">key</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">ext</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'> 82</span> 
<span class='line'> 83</span>     </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">key</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="STRN">'_kvo_cloned'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="KEYW">continue</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// do not copy</span><span class="WHIT">
<span class='line'> 84</span> 
<span class='line'> 85</span>     </span><span class="COMM">// avoid copying builtin methods</span><span class="WHIT">
<span class='line'> 86</span>     </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">ext.hasOwnProperty</span><span class="PUNC">(</span><span class="NAME">key</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="KEYW">continue</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT"> 
<span class='line'> 87</span> 
<span class='line'> 88</span>     </span><span class="COMM">// get the value.  use concats if defined</span><span class="WHIT">
<span class='line'> 89</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">concats.hasOwnProperty</span><span class="PUNC">(</span><span class="NAME">key</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">concats</span><span class="PUNC">[</span><span class="NAME">key</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">ext</span><span class="PUNC">[</span><span class="NAME">key</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 90</span> 
<span class='line'> 91</span>     </span><span class="COMM">// Possibly add to a bindings.</span><span class="WHIT">
<span class='line'> 92</span>     </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">key.length</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">7</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">key.slice</span><span class="PUNC">(</span><span class="PUNC">-</span><span class="NUMB">7</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="STRN">"Binding"</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'> 93</span>       </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">clonedBindings</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'> 94</span>         </span><span class="NAME">bindings</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">bindings</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">SC.EMPTY_ARRAY</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">slice</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 95</span>         </span><span class="NAME">clonedBindings</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">YES</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 96</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'> 97</span> 
<span class='line'> 98</span>       </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">bindings</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">bindings</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">base._bindings</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">SC.EMPTY_ARRAY</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">slice</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 99</span>       </span><span class="NAME">bindings</span><span class="PUNC">[</span><span class="NAME">bindings.length</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">key</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>100</span> 
<span class='line'>101</span>     </span><span class="COMM">// Also add observers, outlets, and properties for functions...</span><span class="WHIT">
<span class='line'>102</span>     </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">value</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">Function</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>103</span> 
<span class='line'>104</span>       </span><span class="COMM">// add super to funcs.  Be sure not to set the base of a func to </span><span class="WHIT">
<span class='line'>105</span>       </span><span class="COMM">// itself to avoid infinite loops.</span><span class="WHIT">
<span class='line'>106</span>       </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">value.superclass</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">cur</span><span class="PUNC">=</span><span class="NAME">base</span><span class="PUNC">[</span><span class="NAME">key</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>107</span>         </span><span class="NAME">value.superclass</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">value.base</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">cur</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">K</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>108</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>109</span> 
<span class='line'>110</span>       </span><span class="COMM">// handle regular observers</span><span class="WHIT">
<span class='line'>111</span>       </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">value.propertyPaths</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>112</span>         </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">clonedObservers</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>113</span>           </span><span class="NAME">observers</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">observers</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">SC.EMPTY_ARRAY</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">slice</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>114</span>           </span><span class="NAME">clonedObservers</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">YES</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>115</span>         </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>116</span>         </span><span class="NAME">observers</span><span class="PUNC">[</span><span class="NAME">observers.length</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">key</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>117</span> 
<span class='line'>118</span>       </span><span class="COMM">// handle local properties</span><span class="WHIT">
<span class='line'>119</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>120</span>       
<span class='line'>121</span>       </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">paths</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">value.localPropertyPaths</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>122</span>         </span><span class="NAME">pathLoc</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">paths.length</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>123</span>         </span><span class="KEYW">while</span><span class="PUNC">(</span><span class="PUNC">--</span><span class="NAME">pathLoc</span><span class="WHIT"> </span><span class="PUNC">>=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>124</span>           </span><span class="NAME">local</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">base._kvo_for</span><span class="PUNC">(</span><span class="NAME">SC.keyFor</span><span class="PUNC">(</span><span class="STRN">'_kvo_local'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">paths</span><span class="PUNC">[</span><span class="NAME">pathLoc</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">SC.CoreSet</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>125</span>           </span><span class="NAME">local.add</span><span class="PUNC">(</span><span class="NAME">key</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>126</span>           </span><span class="NAME">base._kvo_for</span><span class="PUNC">(</span><span class="STRN">'_kvo_observed_keys'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">SC.CoreSet</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">add</span><span class="PUNC">(</span><span class="NAME">paths</span><span class="PUNC">[</span><span class="NAME">pathLoc</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>127</span>         </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>128</span> 
<span class='line'>129</span>       </span><span class="COMM">// handle computed properties</span><span class="WHIT">
<span class='line'>130</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>131</span>       
<span class='line'>132</span>       </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">value.dependentKeys</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>133</span>         </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">clonedProperties</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>134</span>           </span><span class="NAME">properties</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">properties</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">SC.EMPTY_ARRAY</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">slice</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>135</span>           </span><span class="NAME">clonedProperties</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">YES</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>136</span>         </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>137</span>         </span><span class="NAME">properties</span><span class="PUNC">[</span><span class="NAME">properties.length</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">key</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>138</span> 
<span class='line'>139</span>       </span><span class="COMM">// handle outlets</span><span class="WHIT">
<span class='line'>140</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>141</span>       
<span class='line'>142</span>       </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">value.autoconfiguredOutlet</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>143</span>         </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">clonedOutlets</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>144</span>           </span><span class="NAME">outlets</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">outlets</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">SC.EMPTY_ARRAY</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">slice</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>145</span>           </span><span class="NAME">clonedOutlets</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">YES</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>146</span>         </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>147</span>         </span><span class="NAME">outlets</span><span class="PUNC">[</span><span class="NAME">outlets.length</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">key</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">          
<span class='line'>148</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>149</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>150</span> 
<span class='line'>151</span>     </span><span class="COMM">// copy property</span><span class="WHIT">
<span class='line'>152</span>     </span><span class="NAME">base</span><span class="PUNC">[</span><span class="NAME">key</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>153</span>   </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>154</span>   
<span class='line'>155</span>   </span><span class="COMM">// Manually set base on toString() because some JS engines (such as IE8) do</span><span class="WHIT">
<span class='line'>156</span>   </span><span class="COMM">// not enumerate it</span><span class="WHIT">
<span class='line'>157</span>   </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">ext.hasOwnProperty</span><span class="PUNC">(</span><span class="STRN">'toString'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>158</span>     </span><span class="NAME">key</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'toString'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>159</span>     </span><span class="COMM">// get the value.  use concats if defined</span><span class="WHIT">
<span class='line'>160</span>     </span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">concats.hasOwnProperty</span><span class="PUNC">(</span><span class="NAME">key</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">concats</span><span class="PUNC">[</span><span class="NAME">key</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">ext</span><span class="PUNC">[</span><span class="NAME">key</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>161</span>     </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">value.superclass</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">cur</span><span class="PUNC">=</span><span class="NAME">base</span><span class="PUNC">[</span><span class="NAME">key</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>162</span>       </span><span class="NAME">value.superclass</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">value.base</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">cur</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">K</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>163</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>164</span>     </span><span class="COMM">// copy property</span><span class="WHIT">
<span class='line'>165</span>     </span><span class="NAME">base</span><span class="PUNC">[</span><span class="NAME">key</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>166</span>   </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>167</span> 
<span class='line'>168</span> 
<span class='line'>169</span>   </span><span class="COMM">// copy bindings, observers, and properties </span><span class="WHIT">
<span class='line'>170</span>   </span><span class="NAME">base._bindings</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">bindings</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>171</span>   </span><span class="NAME">base._observers</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">observers</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>172</span>   </span><span class="NAME">base._properties</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">properties</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>173</span>   </span><span class="NAME">base.outlets</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">outlets</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>174</span> 
<span class='line'>175</span>   </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">base</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>176</span> </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>177</span> 
<span class='line'>178</span> </span><span class="COMM">/** @class
<span class='line'>179</span> 
<span class='line'>180</span>   Root object for the SproutCore framework.  SC.Object is the root class for
<span class='line'>181</span>   most classes defined by SproutCore.  It builds on top of the native object
<span class='line'>182</span>   support provided by JavaScript to provide support for class-like 
<span class='line'>183</span>   inheritance, automatic bindings, properties observers, and more.  
<span class='line'>184</span>   
<span class='line'>185</span>   Most of the classes you define in your application should inherit from 
<span class='line'>186</span>   SC.Object or one of its subclasses.  If you are writing objects of your
<span class='line'>187</span>   own, you should read this documentation to learn some of the details of 
<span class='line'>188</span>   how SC.Object's behave and how they differ from other frameworks.
<span class='line'>189</span>   
<span class='line'>190</span>   h2. About SproutCore Classes
<span class='line'>191</span>   
<span class='line'>192</span>   JavaScript is not a class-based language.  Instead it uses a type of 
<span class='line'>193</span>   inheritence inspired by self called "prototypical" inheritance. 
<span class='line'>194</span>   ...
<span class='line'>195</span> 
<span class='line'>196</span>   h2. Using SproutCore objects with other JavaScript object.
<span class='line'>197</span>   
<span class='line'>198</span>   You can create a SproutCore object just like any other object...
<span class='line'>199</span>   obj = new SC.Object() ;
<span class='line'>200</span>   
<span class='line'>201</span>   @extends SC.Observable 
<span class='line'>202</span>   @since SproutCore 1.0
<span class='line'>203</span> */</span><span class="WHIT">
<span class='line'>204</span> </span><span class="NAME">SC.Object</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">props</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._object_init</span><span class="PUNC">(</span><span class="NAME">props</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>205</span> 
<span class='line'>206</span> </span><span class="NAME">SC.mixin</span><span class="PUNC">(</span><span class="NAME">SC.Object</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="COMM">/** @scope SC.Object */</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>207</span> 
<span class='line'>208</span>   </span><span class="COMM">/**
<span class='line'>209</span>     Adds the passed properties to the object's class definition.  You can 
<span class='line'>210</span>     pass as many hashes as you want, including Mixins, and they will be 
<span class='line'>211</span>     added in the order they are passed.
<span class='line'>212</span> 
<span class='line'>213</span>     This is a shorthand for calling SC.mixin(MyClass, props...);
<span class='line'>214</span>     
<span class='line'>215</span>     @params {Hash} props the properties you want to add.
<span class='line'>216</span>     @returns {Object} receiver
<span class='line'>217</span>   */</span><span class="WHIT">
<span class='line'>218</span>   </span><span class="NAME">mixin</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">props</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>219</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">arguments.length</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">loc</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>220</span>     </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">loc</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">loc</span><span class="PUNC">&lt;</span><span class="NAME">len</span><span class="PUNC">;</span><span class="NAME">loc</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">SC.mixin</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">[</span><span class="NAME">loc</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>221</span>     </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>222</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>223</span> 
<span class='line'>224</span>   </span><span class="COMM">// ..........................................</span><span class="WHIT">
<span class='line'>225</span>   </span><span class="COMM">// CREATING CLASSES AND INSTANCES</span><span class="WHIT">
<span class='line'>226</span>   </span><span class="COMM">//</span><span class="WHIT">
<span class='line'>227</span> 
<span class='line'>228</span>   </span><span class="COMM">/**
<span class='line'>229</span>     Points to the superclass for this class.  You can use this to trace a
<span class='line'>230</span>     class hierarchy.
<span class='line'>231</span>     
<span class='line'>232</span>     @property {SC.Object}
<span class='line'>233</span>   */</span><span class="WHIT">
<span class='line'>234</span>   </span><span class="NAME">superclass</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>235</span>   
<span class='line'>236</span>   </span><span class="COMM">/**
<span class='line'>237</span>     Creates a new subclass of the receiver, adding any passed properties to
<span class='line'>238</span>     the instance definition of the new class.  You should use this method
<span class='line'>239</span>     when you plan to create several objects based on a class with similar 
<span class='line'>240</span>     properties.
<span class='line'>241</span> 
<span class='line'>242</span>     h2. Init
<span class='line'>243</span> 
<span class='line'>244</span>     If you define an init() method, it will be called when you create 
<span class='line'>245</span>     instances of your new class.  Since SproutCore uses the init() method to
<span class='line'>246</span>     do important setup, you must be sure to always call sc_super() somewhere
<span class='line'>247</span>     in your init() to allow the normal setup to proceed.
<span class='line'>248</span> 
<span class='line'>249</span>     @params {Hash} props the methods of properties you want to add
<span class='line'>250</span>     @returns {Class} A new object class
<span class='line'>251</span>   */</span><span class="WHIT">
<span class='line'>252</span>   </span><span class="NAME">extend</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">props</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">   
<span class='line'>253</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bench</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">SC.BENCHMARK_OBJECTS</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>254</span>     </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">bench</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">SC.Benchmark.start</span><span class="PUNC">(</span><span class="STRN">'SC.Object.extend'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>255</span> 
<span class='line'>256</span>     </span><span class="COMM">// build a new constructor and copy class methods.  Do this before </span><span class="WHIT">
<span class='line'>257</span>     </span><span class="COMM">// adding any other properties so they are not overwritten by the copy.</span><span class="WHIT">
<span class='line'>258</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">prop</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">ret</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">props</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._object_init</span><span class="PUNC">(</span><span class="NAME">props</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>259</span>     </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">prop</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>260</span>       </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.hasOwnProperty</span><span class="PUNC">(</span><span class="NAME">prop</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="KEYW">continue</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>261</span>       </span><span class="NAME">ret</span><span class="PUNC">[</span><span class="NAME">prop</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">[</span><span class="NAME">prop</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>262</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>263</span>     
<span class='line'>264</span>     </span><span class="COMM">// manually copy toString() because some JS engines do not enumerate it</span><span class="WHIT">
<span class='line'>265</span>     </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.hasOwnProperty</span><span class="PUNC">(</span><span class="STRN">'toString'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">ret.toString</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.toString</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>266</span> 
<span class='line'>267</span>     </span><span class="COMM">// now setup superclass, guid</span><span class="WHIT">
<span class='line'>268</span>     </span><span class="NAME">ret.superclass</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>269</span>     </span><span class="NAME">SC.generateGuid</span><span class="PUNC">(</span><span class="NAME">ret</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// setup guid</span><span class="WHIT">
<span class='line'>270</span> 
<span class='line'>271</span>     </span><span class="NAME">ret.subclasses</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">SC.Set.create</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>272</span>     </span><span class="NAME">this.subclasses.add</span><span class="PUNC">(</span><span class="NAME">ret</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// now we can walk a class hierarchy</span><span class="WHIT">
<span class='line'>273</span> 
<span class='line'>274</span>     </span><span class="COMM">// setup new prototype and add properties to it</span><span class="WHIT">
<span class='line'>275</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">base</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">ret.prototype</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">SC.beget</span><span class="PUNC">(</span><span class="NAME">this.prototype</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>276</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">idx</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">arguments.length</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>277</span>     </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">idx</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">idx</span><span class="PUNC">&lt;</span><span class="NAME">len</span><span class="PUNC">;</span><span class="NAME">idx</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">SC._object_extend</span><span class="PUNC">(</span><span class="NAME">base</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">[</span><span class="NAME">idx</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>278</span>     </span><span class="NAME">base.constructor</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">ret</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// save constructor</span><span class="WHIT">
<span class='line'>279</span> 
<span class='line'>280</span>     </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">bench</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">SC.Benchmark.end</span><span class="PUNC">(</span><span class="STRN">'SC.Object.extend'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>281</span>     </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">ret</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>282</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>283</span> 
<span class='line'>284</span>   </span><span class="COMM">/**
<span class='line'>285</span>     Creates a new instance of the class.
<span class='line'>286</span> 
<span class='line'>287</span>     Unlike most frameworks, you do not pass parameters to the init function
<span class='line'>288</span>     for an object.  Instead, you pass a hash of additional properties you 
<span class='line'>289</span>     want to have assigned to the object when it is first created.  This is
<span class='line'>290</span>     functionally like creating an anonymous subclass of the receiver and then
<span class='line'>291</span>     instantiating it, but more efficient.
<span class='line'>292</span> 
<span class='line'>293</span>     You can use create() like you would a normal constructor in a 
<span class='line'>294</span>     class-based system, or you can use it to create highly customized 
<span class='line'>295</span>     singleton objects such as controllers or app-level objects.  This is 
<span class='line'>296</span>     often more efficient than creating subclasses and then instantiating 
<span class='line'>297</span>     them.
<span class='line'>298</span> 
<span class='line'>299</span>     You can pass any hash of properties to this method, including mixins.
<span class='line'>300</span>     
<span class='line'>301</span>     @param {Hash} props 
<span class='line'>302</span>       optional hash of method or properties to add to the instance.
<span class='line'>303</span>       
<span class='line'>304</span>     @returns {SC.Object} new instance of the receiver class.
<span class='line'>305</span>   */</span><span class="WHIT">
<span class='line'>306</span>   </span><span class="NAME">create</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>307</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">C</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">ret</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> 
<span class='line'>308</span>     </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">SC.ObjectDesigner</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>309</span>       </span><span class="NAME">SC.ObjectDesigner.didCreateObject</span><span class="PUNC">(</span><span class="NAME">ret</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">SC.$A</span><span class="PUNC">(</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>310</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>311</span>     </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">ret</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT"> 
<span class='line'>312</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>313</span>   </span><span class="COMM">/**
<span class='line'>314</span>     Walk like a duck.  You can use this to quickly test classes.
<span class='line'>315</span>     
<span class='line'>316</span>     @property {Boolean}
<span class='line'>317</span>   */</span><span class="WHIT">
<span class='line'>318</span>   </span><span class="NAME">isClass</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">YES</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>319</span> 
<span class='line'>320</span>   </span><span class="COMM">/**
<span class='line'>321</span>     Set of subclasses that extend from this class.  You can observe this 
<span class='line'>322</span>     array if you want to be notified when the object is extended.
<span class='line'>323</span>     
<span class='line'>324</span>     @property {SC.Set}
<span class='line'>325</span>   */</span><span class="WHIT">
<span class='line'>326</span>   </span><span class="NAME">subclasses</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">SC.Set.create</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>327</span>   
<span class='line'>328</span>   </span><span class="COMM">/** @private */</span><span class="WHIT">
<span class='line'>329</span>   </span><span class="NAME">toString</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">SC._object_className</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>330</span> 
<span class='line'>331</span>   </span><span class="COMM">// ..........................................</span><span class="WHIT">
<span class='line'>332</span>   </span><span class="COMM">// PROPERTY SUPPORT METHODS</span><span class="WHIT">
<span class='line'>333</span>   </span><span class="COMM">//</span><span class="WHIT">
<span class='line'>334</span> 
<span class='line'>335</span>   </span><span class="COMM">/** 
<span class='line'>336</span>     Returns YES if the receiver is a subclass of the named class.  If the 
<span class='line'>337</span>     receiver is the class passed, this will return NO since the class is not
<span class='line'>338</span>     a subclass of itself.  See also kindOf().
<span class='line'>339</span> 
<span class='line'>340</span>     h2. Example
<span class='line'>341</span>     
<span class='line'>342</span>     {{{
<span class='line'>343</span>       ClassA = SC.Object.extend();
<span class='line'>344</span>       ClassB = ClassA.extend();
<span class='line'>345</span> 
<span class='line'>346</span>       ClassB.subclassOf(ClassA) => YES
<span class='line'>347</span>       ClassA.subclassOf(ClassA) => NO
<span class='line'>348</span>     }}}
<span class='line'>349</span>     
<span class='line'>350</span>     @param {Class} scClass class to compare
<span class='line'>351</span>     @returns {Boolean} 
<span class='line'>352</span>   */</span><span class="WHIT">
<span class='line'>353</span>   </span><span class="NAME">subclassOf</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">scClass</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>354</span>     </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">this</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">scClass</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">NO</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>355</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>356</span>     </span><span class="KEYW">while</span><span class="PUNC">(</span><span class="NAME">t</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">t.superclass</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">t</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">scClass</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">YES</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>357</span>     </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">NO</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>358</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>359</span>   
<span class='line'>360</span>   </span><span class="COMM">/**
<span class='line'>361</span>     Returns YES if the passed object is a subclass of the receiver.  This is 
<span class='line'>362</span>     the inverse of subclassOf() which you call on the class you want to test.
<span class='line'>363</span>     
<span class='line'>364</span>     @param {Class} scClass class to compare
<span class='line'>365</span>     @returns {Boolean}
<span class='line'>366</span>   */</span><span class="WHIT">
<span class='line'>367</span>   </span><span class="NAME">hasSubclass</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">scClass</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>368</span>     </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">scClass</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">scClass.subclassOf</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">scClass.subclassOf</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">NO</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>369</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>370</span> 
<span class='line'>371</span>   </span><span class="COMM">/**
<span class='line'>372</span>     Returns YES if the receiver is the passed class or is a subclass of the 
<span class='line'>373</span>     passed class.  Unlike subclassOf(), this method will return YES if you
<span class='line'>374</span>     pass the receiver itself, since class is a kind of itself.  See also 
<span class='line'>375</span>     subclassOf().
<span class='line'>376</span> 
<span class='line'>377</span>     h2. Example
<span class='line'>378</span> 
<span class='line'>379</span>     {{{
<span class='line'>380</span>       ClassA = SC.Object.extend();
<span class='line'>381</span>       ClassB = ClassA.extend();
<span class='line'>382</span> 
<span class='line'>383</span>       ClassB.kindOf(ClassA) => YES
<span class='line'>384</span>       ClassA.kindOf(ClassA) => YES
<span class='line'>385</span>     }}}
<span class='line'>386</span>     
<span class='line'>387</span>     @param {Class} scClass class to compare
<span class='line'>388</span>     @returns {Boolean} 
<span class='line'>389</span>   */</span><span class="WHIT">
<span class='line'>390</span>   </span><span class="NAME">kindOf</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">scClass</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> 
<span class='line'>391</span>     </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">this</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">scClass</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">this.subclassOf</span><span class="PUNC">(</span><span class="NAME">scClass</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>392</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>393</span>   
<span class='line'>394</span>   </span><span class="COMM">// ..........................................................</span><span class="WHIT">
<span class='line'>395</span>   </span><span class="COMM">// Designers</span><span class="WHIT">
<span class='line'>396</span>   </span><span class="COMM">//   </span><span class="WHIT">
<span class='line'>397</span>   </span><span class="COMM">/**
<span class='line'>398</span>     This method works just like extend() except that it will also preserve
<span class='line'>399</span>     the passed attributes.
<span class='line'>400</span>     
<span class='line'>401</span>     @param {Hash} attrs Attributes to add to view
<span class='line'>402</span>     @returns {Class} SC.Object subclass to create
<span class='line'>403</span>     @function
<span class='line'>404</span>   */</span><span class="WHIT"> 
<span class='line'>405</span>   </span><span class="NAME">design</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>406</span>     </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.isDesign</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// only run design one time</span><span class="WHIT">
<span class='line'>407</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ret</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.extend.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>408</span>     </span><span class="NAME">ret.isDesign</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">YES</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>409</span>     </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">SC.ObjectDesigner</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>410</span>       </span><span class="NAME">SC.ObjectDesigner.didLoadDesign</span><span class="PUNC">(</span><span class="NAME">ret</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">SC.A</span><span class="PUNC">(</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>411</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>412</span>     </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">ret</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>413</span>   </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>414</span> </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>415</span> 
<span class='line'>416</span> </span><span class="COMM">// ..........................................</span><span class="WHIT">
<span class='line'>417</span> </span><span class="COMM">// DEFAULT OBJECT INSTANCE</span><span class="WHIT">
<span class='line'>418</span> </span><span class="COMM">// </span><span class="WHIT">
<span class='line'>419</span> </span><span class="NAME">SC.Object.prototype</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>420</span>   
<span class='line'>421</span>   </span><span class="NAME">_kvo_enabled</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">YES</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>422</span>   
<span class='line'>423</span>   </span><span class="COMM">/** @private
<span class='line'>424</span>     This is the first method invoked on a new instance.  It will first apply
<span class='line'>425</span>     any added properties to the new instance and then calls the real init()
<span class='line'>426</span>     method.
<span class='line'>427</span>     
<span class='line'>428</span>     @param {Array} extensions an array-like object with hashes to apply.
<span class='line'>429</span>     @returns {Object} receiver
<span class='line'>430</span>   */</span><span class="WHIT">
<span class='line'>431</span>   </span><span class="NAME">_object_init</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">extensions</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>432</span>     </span><span class="COMM">// apply any new properties</span><span class="WHIT">
<span class='line'>433</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">idx</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">extensions</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">extensions.length</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>434</span>     </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">idx</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">idx</span><span class="PUNC">&lt;</span><span class="NAME">len</span><span class="PUNC">;</span><span class="NAME">idx</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">SC._object_extend</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">extensions</span><span class="PUNC">[</span><span class="NAME">idx</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>435</span>     </span><span class="NAME">SC.generateGuid</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// add guid</span><span class="WHIT">
<span class='line'>436</span>     </span><span class="NAME">this.init</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// call real init</span><span class="WHIT">
<span class='line'>437</span>     
<span class='line'>438</span>     </span><span class="COMM">// Call 'initMixin' methods to automatically setup modules.</span><span class="WHIT">
<span class='line'>439</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">inits</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.initMixin</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">inits</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">inits.length</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>440</span>     </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">idx</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">idx</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">idx</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">inits</span><span class="PUNC">[</span><span class="NAME">idx</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>441</span>     
<span class='line'>442</span>     </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// done!</span><span class="WHIT">
<span class='line'>443</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>444</span>   
<span class='line'>445</span>   </span><span class="COMM">/**
<span class='line'>446</span>     You can call this method on an object to mixin one or more hashes of 
<span class='line'>447</span>     properties on the receiver object.  In addition to simply copying 
<span class='line'>448</span>     properties, this method will also prepare the properties for use in 
<span class='line'>449</span>     bindings, computed properties, etc.
<span class='line'>450</span>     
<span class='line'>451</span>     If you plan to use this method, you should call it before you call
<span class='line'>452</span>     the inherited init method from SC.Object or else your instance may not 
<span class='line'>453</span>     function properly.
<span class='line'>454</span>     
<span class='line'>455</span>     h2. Example
<span class='line'>456</span>     
<span class='line'>457</span>     {{{
<span class='line'>458</span>       // dynamically apply a mixin specified in an object property
<span class='line'>459</span>       var MyClass = SC.Object.extend({
<span class='line'>460</span>          extraMixin: null,
<span class='line'>461</span>          
<span class='line'>462</span>          init: function() {
<span class='line'>463</span>            this.mixin(this.extraMixin);
<span class='line'>464</span>            sc_super();
<span class='line'>465</span>          }
<span class='line'>466</span>       });
<span class='line'>467</span>       
<span class='line'>468</span>       var ExampleMixin = { foo: "bar" };
<span class='line'>469</span>       
<span class='line'>470</span>       var instance = MyClass.create({ extraMixin: ExampleMixin }) ;
<span class='line'>471</span>       
<span class='line'>472</span>       instance.get('foo') => "bar"
<span class='line'>473</span>     }}}
<span class='line'>474</span> 
<span class='line'>475</span>     @param {Hash} ext a hash to copy.  Only one.
<span class='line'>476</span>     @returns {Object} receiver
<span class='line'>477</span>   */</span><span class="WHIT">
<span class='line'>478</span>   </span><span class="NAME">mixin</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>479</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">idx</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">arguments.length</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>480</span>     </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">idx</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">idx</span><span class="PUNC">&lt;</span><span class="NAME">len</span><span class="PUNC">;</span><span class="NAME">idx</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">SC.mixin</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">[</span><span class="NAME">idx</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>481</span> 
<span class='line'>482</span>     </span><span class="COMM">// call initMixin</span><span class="WHIT">
<span class='line'>483</span>     </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">idx</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">idx</span><span class="PUNC">&lt;</span><span class="NAME">len</span><span class="PUNC">;</span><span class="NAME">idx</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>484</span>       </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">init</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">[</span><span class="NAME">idx</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">initMixin</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>485</span>       </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">init</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">init.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>486</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>487</span>     </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>488</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>489</span> 
<span class='line'>490</span>   </span><span class="COMM">/**
<span class='line'>491</span>     This method is invoked automatically whenever a new object is 
<span class='line'>492</span>     instantiated.  You can override this method as you like to setup your
<span class='line'>493</span>     new object.  
<span class='line'>494</span> 
<span class='line'>495</span>     Within your object, be sure to call sc_super() to ensure that the 
<span class='line'>496</span>     built-in init method is also called or your observers and computed 
<span class='line'>497</span>     properties may not be configured.
<span class='line'>498</span> 
<span class='line'>499</span>     Although the default init() method returns the receiver, the return 
<span class='line'>500</span>     value is ignored.
<span class='line'>501</span> 
<span class='line'>502</span>     @returns {void}
<span class='line'>503</span>   */</span><span class="WHIT">
<span class='line'>504</span>   </span><span class="NAME">init</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>505</span>     </span><span class="NAME">this.initObservable</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>506</span>     </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>507</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>508</span> 
<span class='line'>509</span>   </span><span class="COMM">/**
<span class='line'>510</span>     Set to NO once this object has been destroyed. 
<span class='line'>511</span>     
<span class='line'>512</span>     @property {Boolean}
<span class='line'>513</span>   */</span><span class="WHIT">
<span class='line'>514</span>   </span><span class="NAME">isDestroyed</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">NO</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>515</span> 
<span class='line'>516</span>   </span><span class="COMM">/**
<span class='line'>517</span>     Call this method when you are finished with an object to teardown its
<span class='line'>518</span>     contents.  Because JavaScript is garbage collected, you do not usually 
<span class='line'>519</span>     need to call this method.  However, you may choose to do so for certain
<span class='line'>520</span>     objects, especially views, in order to let them reclaim memory they 
<span class='line'>521</span>     consume immediately.
<span class='line'>522</span> 
<span class='line'>523</span>     If you would like to perform additional cleanup when an object is
<span class='line'>524</span>     finished, you may override this method.  Be sure to call sc_super().
<span class='line'>525</span>     
<span class='line'>526</span>     @returns {SC.Object} receiver
<span class='line'>527</span>   */</span><span class="WHIT">
<span class='line'>528</span>   </span><span class="NAME">destroy</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>529</span>     </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="STRN">'isDestroyed'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// nothing to do</span><span class="WHIT">
<span class='line'>530</span>     </span><span class="NAME">this.set</span><span class="PUNC">(</span><span class="STRN">'isDestroyed'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">YES</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>531</span> 
<span class='line'>532</span>     </span><span class="COMM">// destroy any mixins</span><span class="WHIT">
<span class='line'>533</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">idx</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">inits</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.destroyMixin</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">inits</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">inits.length</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>534</span>     </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">idx</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">idx</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">idx</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">inits</span><span class="PUNC">[</span><span class="NAME">idx</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>535</span> 
<span class='line'>536</span>     </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>537</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>538</span> 
<span class='line'>539</span>   </span><span class="COMM">/**
<span class='line'>540</span>     Walk like a duck. Always YES since this is an object and not a class.
<span class='line'>541</span>     
<span class='line'>542</span>     @property {Boolean}
<span class='line'>543</span>   */</span><span class="WHIT">
<span class='line'>544</span>   </span><span class="NAME">isObject</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>545</span> 
<span class='line'>546</span>   </span><span class="COMM">/**
<span class='line'>547</span>     Returns YES if the named value is an executable function.
<span class='line'>548</span> 
<span class='line'>549</span>     @param methodName {String} the property name to check
<span class='line'>550</span>     @returns {Boolean}
<span class='line'>551</span>   */</span><span class="WHIT">
<span class='line'>552</span>   </span><span class="NAME">respondsTo</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">methodName</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>553</span>     </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">[</span><span class="NAME">methodName</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">Function</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>554</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>555</span>   
<span class='line'>556</span>   </span><span class="COMM">/**
<span class='line'>557</span>     Attemps to invoke the named method, passing the included two arguments.  
<span class='line'>558</span>     Returns NO if the method is either not implemented or if the handler 
<span class='line'>559</span>     returns NO (indicating that it did not handle the event).  This method 
<span class='line'>560</span>     is invoked to deliver actions from menu items and to deliver events.  
<span class='line'>561</span>     You can override this method to provide additional handling if you 
<span class='line'>562</span>     prefer.
<span class='line'>563</span> 
<span class='line'>564</span>     @param {String} methodName
<span class='line'>565</span>     @param {Object} arg1
<span class='line'>566</span>     @param {Object} arg2
<span class='line'>567</span>     @returns {Boolean} YES if handled, NO if not handled
<span class='line'>568</span>   */</span><span class="WHIT">
<span class='line'>569</span>   </span><span class="NAME">tryToPerform</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">methodName</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arg1</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arg2</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>570</span>     </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.respondsTo</span><span class="PUNC">(</span><span class="NAME">methodName</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">[</span><span class="NAME">methodName</span><span class="PUNC">]</span><span class="PUNC">(</span><span class="NAME">arg1</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arg2</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="NAME">NO</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>571</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>572</span> 
<span class='line'>573</span>   </span><span class="COMM">/**  
<span class='line'>574</span>     EXPERIMENTAL:  You can use this to invoke a superclass implementation in
<span class='line'>575</span>     any method.  This does not work in Safari 2 or earlier.  If you need to
<span class='line'>576</span>     target these methods, you should use one of the alternatives below:
<span class='line'>577</span> 
<span class='line'>578</span>     - *With Build Tools:* sc_super();
<span class='line'>579</span>     - *Without Build Tools:* arguments.callee.base.apply(this, arguments);
<span class='line'>580</span>     
<span class='line'>581</span>     h2. Example
<span class='line'>582</span>     
<span class='line'>583</span>     All of the following methods will call the superclass implementation of
<span class='line'>584</span>     your method:
<span class='line'>585</span>     
<span class='line'>586</span>     {{{
<span class='line'>587</span>       SC.Object.create({
<span class='line'>588</span>         
<span class='line'>589</span>         // DOES NOT WORK IN SAFARI 2 OR EARLIER
<span class='line'>590</span>         method1: function() {
<span class='line'>591</span>           this.superclass();
<span class='line'>592</span>         },
<span class='line'>593</span>         
<span class='line'>594</span>         // REQUIRES SC-BUILD TOOLS
<span class='line'>595</span>         method2: function() {
<span class='line'>596</span>           sc_super();
<span class='line'>597</span>         },
<span class='line'>598</span>         
<span class='line'>599</span>         // WORKS ANYTIME
<span class='line'>600</span>         method3: function() {
<span class='line'>601</span>           arguments.callee.base.apply(this, arguments);
<span class='line'>602</span>         }
<span class='line'>603</span>       });
<span class='line'>604</span>     }}}
<span class='line'>605</span> 
<span class='line'>606</span>     @params args {*args} any arguments you want to pass along.
<span class='line'>607</span>     @returns {Object} return value from super
<span class='line'>608</span>   */</span><span class="WHIT">
<span class='line'>609</span>   </span><span class="NAME">superclass</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">args</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>610</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">caller</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">arguments.callee.caller</span><span class="PUNC">;</span><span class="WHIT"> 
<span class='line'>611</span>     </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">caller</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="STRN">"superclass cannot determine the caller method"</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>612</span>     </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">caller.superclass</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">caller.superclass.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>613</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>614</span> 
<span class='line'>615</span>   </span><span class="COMM">/**  
<span class='line'>616</span>     returns YES if the receiver is an instance of the named class.  See also
<span class='line'>617</span>     kindOf().
<span class='line'>618</span> 
<span class='line'>619</span>     h2. Example
<span class='line'>620</span>     
<span class='line'>621</span>     {{{
<span class='line'>622</span>       var ClassA = SC.Object.extend();
<span class='line'>623</span>       var ClassB = SC.Object.extend();
<span class='line'>624</span>       
<span class='line'>625</span>       var instA = ClassA.create();
<span class='line'>626</span>       var instB = ClassB.create();
<span class='line'>627</span>       
<span class='line'>628</span>       instA.instanceOf(ClassA) => YES
<span class='line'>629</span>       instB.instanceOf(ClassA) => NO
<span class='line'>630</span>     }}}
<span class='line'>631</span>     
<span class='line'>632</span>     @param {Class} scClass the class
<span class='line'>633</span>     @returns {Boolean}
<span class='line'>634</span>   */</span><span class="WHIT">
<span class='line'>635</span>   </span><span class="NAME">instanceOf</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">scClass</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>636</span>     </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.constructor</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">scClass</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">  
<span class='line'>637</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>638</span> 
<span class='line'>639</span>   </span><span class="COMM">/**  
<span class='line'>640</span>     Returns true if the receiver is an instance of the named class or any 
<span class='line'>641</span>     subclass of the named class.  See also instanceOf().
<span class='line'>642</span> 
<span class='line'>643</span>     h2. Example
<span class='line'>644</span>     
<span class='line'>645</span>     {{{
<span class='line'>646</span>       var ClassA = SC.Object.extend();
<span class='line'>647</span>       var ClassB = SC.Object.extend();
<span class='line'>648</span>       
<span class='line'>649</span>       var instA = ClassA.create();
<span class='line'>650</span>       var instB = ClassB.create();
<span class='line'>651</span>       
<span class='line'>652</span>       instA.kindOf(ClassA) => YES
<span class='line'>653</span>       instB.kindOf(ClassA) => YES
<span class='line'>654</span>     }}}
<span class='line'>655</span> 
<span class='line'>656</span>     @param scClass {Class} the class
<span class='line'>657</span>     @returns {Boolean}
<span class='line'>658</span>   */</span><span class="WHIT">
<span class='line'>659</span>   </span><span class="NAME">kindOf</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">scClass</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.constructor.kindOf</span><span class="PUNC">(</span><span class="NAME">scClass</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>660</span> 
<span class='line'>661</span>   </span><span class="COMM">/** @private */</span><span class="WHIT">
<span class='line'>662</span>   </span><span class="NAME">toString</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>663</span>     </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this._object_toString</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>664</span>       </span><span class="COMM">// only cache the string if the klass name is available</span><span class="WHIT">
<span class='line'>665</span>       </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">klassName</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">SC._object_className</span><span class="PUNC">(</span><span class="NAME">this.constructor</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>666</span>       </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">string</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"%@:%@"</span><span class="PUNC">.</span><span class="NAME">fmt</span><span class="PUNC">(</span><span class="NAME">klassName</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">SC.guidFor</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>667</span>       </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">klassName</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">this._object_toString</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">string</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>668</span>       </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">string</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>669</span>     </span><span class="PUNC">}</span><span class="WHIT"> 
<span class='line'>670</span>     </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._object_toString</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>671</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>672</span> 
<span class='line'>673</span>   </span><span class="COMM">/**  
<span class='line'>674</span>     Activates any outlet connections in object and syncs any bindings.  This
<span class='line'>675</span>     method is called automatically for view classes but may be used for any
<span class='line'>676</span>     object.
<span class='line'>677</span>     
<span class='line'>678</span>     @returns {void}
<span class='line'>679</span>   */</span><span class="WHIT">
<span class='line'>680</span>   </span><span class="NAME">awake</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">key</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>681</span>     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">outlets</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.outlets</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>682</span>         </span><span class="NAME">i</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">outlet</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>683</span>     </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">outlets.length</span><span class="PUNC">;</span><span class="WHIT">  </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">;</span><span class="WHIT">  </span><span class="PUNC">++</span><span class="NAME">i</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>684</span>       </span><span class="NAME">outlet</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">outlets</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>685</span>       </span><span class="NAME">this.get</span><span class="PUNC">(</span><span class="NAME">outlet</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>686</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>687</span>     </span><span class="NAME">this.bindings.invoke</span><span class="PUNC">(</span><span class="STRN">'sync'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> 
<span class='line'>688</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>689</span> 
<span class='line'>690</span>   </span><span class="COMM">/**
<span class='line'>691</span>     Invokes the passed method or method name one time during the runloop.  You
<span class='line'>692</span>     can use this method to schedule methods that need to execute but may be 
<span class='line'>693</span>     too expensive to execute more than once, such as methods that update the
<span class='line'>694</span>     DOM.
<span class='line'>695</span>     
<span class='line'>696</span>     Note that in development mode only, the object and method that call this
<span class='line'>697</span>     method will be recorded, for help in debugging scheduled code.
<span class='line'>698</span>     
<span class='line'>699</span>     @param {Function|String} method method or method name
<span class='line'>700</span>     @returns {SC.Object} receiver
<span class='line'>701</span>   */</span><span class="WHIT">
<span class='line'>702</span>   </span><span class="NAME">invokeOnce</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">method</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>703</span>     </span><span class="NAME">SC.RunLoop.currentRunLoop.invokeOnce</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">method</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>704</span>     </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>705</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>706</span>   
<span class='line'>707</span>   </span><span class="COMM">/**
<span class='line'>708</span>     Invokes the passed method once at the beginning of the next runloop, 
<span class='line'>709</span>     before any other methods (including events) are processed. This is useful
<span class='line'>710</span>     for situations where you know you need to update something, but due to
<span class='line'>711</span>     the way the run loop works, you can't actually do the update until the
<span class='line'>712</span>     run loop has completed.
<span class='line'>713</span>     
<span class='line'>714</span>     A simple example is setting the selection on a collection controller to a 
<span class='line'>715</span>     newly created object. Because the collection controller won't have its
<span class='line'>716</span>     content collection updated until later in the run loop, setting the 
<span class='line'>717</span>     selection immediately will have no effect. In this situation, you could do
<span class='line'>718</span>     this instead:
<span class='line'>719</span>     
<span class='line'>720</span>     {{{
<span class='line'>721</span>       // Creates a new MyRecord object and sets the selection of the
<span class='line'>722</span>       // myRecord collection controller to the new object.
<span class='line'>723</span>       createObjectAction: function(sender, evt) {
<span class='line'>724</span>         // create a new record and add it to the store
<span class='line'>725</span>         var obj = MyRecord.newRecord() ;
<span class='line'>726</span>         
<span class='line'>727</span>         // update the collection controller's selection
<span class='line'>728</span>         MyApp.myRecordCollectionController.invokeLast( function() {
<span class='line'>729</span>           this.set('selection', [obj]) ;
<span class='line'>730</span>         });
<span class='line'>731</span>       }
<span class='line'>732</span>     }}}
<span class='line'>733</span>     
<span class='line'>734</span>     You can call invokeLast as many times as you like and the method will
<span class='line'>735</span>     only be invoked once.
<span class='line'>736</span>     
<span class='line'>737</span>     Note that in development mode only, the object and method that call this
<span class='line'>738</span>     method will be recorded, for help in debugging scheduled code.
<span class='line'>739</span>     
<span class='line'>740</span>     @param {Function|String} method method or method name
<span class='line'>741</span>     @returns {SC.Object} receiver
<span class='line'>742</span>   */</span><span class="WHIT">
<span class='line'>743</span>   </span><span class="NAME">invokeLast</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">method</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>744</span>     </span><span class="NAME">SC.RunLoop.currentRunLoop.invokeLast</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">method</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>745</span>     </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>746</span>   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>747</span>   
<span class='line'>748</span>   </span><span class="COMM">/**
<span class='line'>749</span>     The properties named in this array will be concatenated in subclasses
<span class='line'>750</span>     instead of replaced.  This allows you to name special properties that
<span class='line'>751</span>     should contain any values you specify plus values specified by parents.
<span class='line'>752</span> 
<span class='line'>753</span>     It is used by SproutCore and is available for your use, though you 
<span class='line'>754</span>     should limit the number of properties you include in this list as it 
<span class='line'>755</span>     adds a slight overhead to new class and instance creation.
<span class='line'>756</span> 
<span class='line'>757</span>     @property {Array}
<span class='line'>758</span>   */</span><span class="WHIT">
<span class='line'>759</span>   </span><span class="NAME">concatenatedProperties</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="STRN">'concatenatedProperties'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'initMixin'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'destroyMixin'</span><span class="PUNC">]</span><span class="WHIT">  
<span class='line'>760</span> 
<span class='line'>761</span> </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>762</span> 
<span class='line'>763</span> </span><span class="COMM">// bootstrap the constructor for SC.Object.</span><span class="WHIT">
<span class='line'>764</span> </span><span class="NAME">SC.Object.prototype.constructor</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">SC.Object</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>765</span> 
<span class='line'>766</span> </span><span class="COMM">// Add observable to mixin</span><span class="WHIT">
<span class='line'>767</span> </span><span class="NAME">SC.mixin</span><span class="PUNC">(</span><span class="NAME">SC.Object.prototype</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">SC.Observable</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>768</span> 
<span class='line'>769</span> </span><span class="COMM">// ..........................................................</span><span class="WHIT">
<span class='line'>770</span> </span><span class="COMM">// CLASS NAME SUPPORT</span><span class="WHIT">
<span class='line'>771</span> </span><span class="COMM">// </span><span class="WHIT">
<span class='line'>772</span> 
<span class='line'>773</span> </span><span class="COMM">/** @private
<span class='line'>774</span>   This is a way of performing brute-force introspection.  This searches 
<span class='line'>775</span>   through all the top-level properties looking for classes.  When it finds
<span class='line'>776</span>   one, it saves the class path name.
<span class='line'>777</span> */</span><span class="WHIT">
<span class='line'>778</span> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">findClassNames</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>779</span> 
<span class='line'>780</span>   </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">SC._object_foundObjectClassNames</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>781</span>   </span><span class="NAME">SC._object_foundObjectClassNames</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>782</span> 
<span class='line'>783</span>   </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">seen</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>784</span>   </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">searchObject</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">root</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">object</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">levels</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>785</span>     </span><span class="NAME">levels</span><span class="PUNC">--</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>786</span> 
<span class='line'>787</span>     </span><span class="COMM">// not the fastest, but safe</span><span class="WHIT">
<span class='line'>788</span>     </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">seen.indexOf</span><span class="PUNC">(</span><span class="NAME">object</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">>=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>789</span>     </span><span class="NAME">seen.push</span><span class="PUNC">(</span><span class="NAME">object</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>790</span> 
<span class='line'>791</span>     </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">key</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">object</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>792</span>       </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">key</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="STRN">'__scope__'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="KEYW">continue</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>793</span>       </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">key</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="STRN">'superclass'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="KEYW">continue</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>794</span>       </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">key.match</span><span class="PUNC">(</span><span class="REGX">/^[A-Z0-9]/</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="KEYW">continue</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>795</span> 
<span class='line'>796</span>       </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">path</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">root</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">root</span><span class="PUNC">,</span><span class="NAME">key</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">join</span><span class="PUNC">(</span><span class="STRN">'.'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">key</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>797</span>       </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">object</span><span class="PUNC">[</span><span class="NAME">key</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>798</span> 
<span class='line'>799</span> 
<span class='line'>800</span>       </span><span class="KEYW">switch</span><span class="PUNC">(</span><span class="NAME">SC.typeOf</span><span class="PUNC">(</span><span class="NAME">value</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>801</span>       </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">SC.T_CLASS</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>802</span>         </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">value._object_className</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">value._object_className</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">path</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>803</span>         </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">levels</span><span class="PUNC">>=</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">searchObject</span><span class="PUNC">(</span><span class="NAME">path</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">levels</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>804</span>         </span><span class="KEYW">break</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>805</span> 
<span class='line'>806</span>       </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">SC.T_OBJECT</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>807</span>         </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">levels</span><span class="PUNC">>=</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">searchObject</span><span class="PUNC">(</span><span class="NAME">path</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">levels</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>808</span>         </span><span class="KEYW">break</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>809</span> 
<span class='line'>810</span>       </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">SC.T_HASH</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>811</span>         </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">root</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">path</span><span class="PUNC">===</span><span class="STRN">'SC'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">levels</span><span class="PUNC">>=</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">searchObject</span><span class="PUNC">(</span><span class="NAME">path</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">levels</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>812</span>         </span><span class="KEYW">break</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>813</span> 
<span class='line'>814</span>       </span><span class="KEYW">default</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>815</span>         </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>816</span>       </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>817</span>     </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>818</span>   </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>819</span> 
<span class='line'>820</span>   </span><span class="NAME">searchObject</span><span class="PUNC">(</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">window</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>821</span> 
<span class='line'>822</span>   </span><span class="COMM">// Internet Explorer doesn't loop over global variables...</span><span class="WHIT">
<span class='line'>823</span>   </span><span class="COMM">/*if ( SC.browser.isIE ) {
<span class='line'>824</span>     searchObject('SC', SC, 2) ; // get names for the SC classes
<span class='line'>825</span> 
<span class='line'>826</span>     // get names for the model classes, including nested namespaces (untested)
<span class='line'>827</span>     for ( var i = 0; i &lt; SC.Server.servers.length; i++ ) {
<span class='line'>828</span>       var server = SC.Server.servers[i];
<span class='line'>829</span>       if (server.prefix) {
<span class='line'>830</span>         for (var prefixLoc = 0; prefixLoc &lt; server.prefix.length; prefixLoc++) {
<span class='line'>831</span>           var prefixParts = server.prefix[prefixLoc].split('.');
<span class='line'>832</span>           var namespace = window;
<span class='line'>833</span>           var namespaceName;
<span class='line'>834</span>           for (var prefixPartsLoc = 0; prefixPartsLoc &lt; prefixParts.length; prefixPartsLoc++) {
<span class='line'>835</span>             namespace = namespace[prefixParts[prefixPartsLoc]] ;
<span class='line'>836</span>             namespaceName = prefixParts[prefixPartsLoc];
<span class='line'>837</span>           }
<span class='line'>838</span>           searchObject(namespaceName, namespace, 2) ;
<span class='line'>839</span>         }
<span class='line'>840</span>       }
<span class='line'>841</span>     }
<span class='line'>842</span>   }*/</span><span class="WHIT">
<span class='line'>843</span> </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>844</span> 
<span class='line'>845</span> </span><span class="COMM">/**  
<span class='line'>846</span>   Same as the instance method, but lets you check instanceOf without
<span class='line'>847</span>   having to first check if instanceOf exists as a method.
<span class='line'>848</span>   
<span class='line'>849</span>   @param {Object} scObject the object to check instance of
<span class='line'>850</span>   @param {Class} scClass the class
<span class='line'>851</span>   @returns {Boolean} if object1 is instance of class
<span class='line'>852</span> */</span><span class="WHIT">
<span class='line'>853</span> </span><span class="NAME">SC.instanceOf</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">scObject</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">scClass</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>854</span>   </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">scObject</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">scObject.constructor</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">scClass</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">  
<span class='line'>855</span> </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT"> 
<span class='line'>856</span> 
<span class='line'>857</span> </span><span class="COMM">/**
<span class='line'>858</span>   Same as the instance method, but lets you check kindOf without having to 
<span class='line'>859</span>   first check if kindOf exists as a method.
<span class='line'>860</span>   
<span class='line'>861</span>   @param {Object} scObject object to check kind of
<span class='line'>862</span>   @param {Class} scClass the class to check
<span class='line'>863</span>   @returns {Boolean} if object is an instance of class or subclass
<span class='line'>864</span> */</span><span class="WHIT">
<span class='line'>865</span> </span><span class="NAME">SC.kindOf</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">scObject</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">scClass</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>866</span>   </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">scObject</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">scObject.isClass</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">scObject</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">scObject.constructor</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>867</span>   </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">scObject</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">scObject.kindOf</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">scObject.kindOf</span><span class="PUNC">(</span><span class="NAME">scClass</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>868</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>869</span> 
<span class='line'>870</span> </span><span class="COMM">/** @private
<span class='line'>871</span>   Returns the name of this class.  If the name is not known, triggers
<span class='line'>872</span>   a search.  This can be expensive the first time it is called.
<span class='line'>873</span>   
<span class='line'>874</span>   This method is used to allow classes to determine their own name.
<span class='line'>875</span> */</span><span class="WHIT">
<span class='line'>876</span> </span><span class="NAME">SC._object_className</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">obj</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>877</span>   </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">SC.isReady</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="STRN">''</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// class names are not available until ready</span><span class="WHIT">
<span class='line'>878</span>   </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">obj._object_className</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">findClassNames</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>879</span>   </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">obj._object_className</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">obj._object_className</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>880</span> 
<span class='line'>881</span>   </span><span class="COMM">// if no direct classname was found, walk up class chain looking for a </span><span class="WHIT">
<span class='line'>882</span>   </span><span class="COMM">// match.</span><span class="WHIT">
<span class='line'>883</span>   </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ret</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">obj</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>884</span>   </span><span class="KEYW">while</span><span class="PUNC">(</span><span class="NAME">ret</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">ret._object_className</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">ret</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">ret.superclass</span><span class="PUNC">;</span><span class="WHIT"> 
<span class='line'>885</span>   </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">ret</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">ret._object_className</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">ret._object_className</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'Anonymous'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>886</span> </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>887</span> 
<span class='line'>888</span> </span></pre></body></html>